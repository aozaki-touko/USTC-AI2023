# hw3

1. 分别用带有前向检验、MRV和最少约束值启发式的回溯算法手工求解**图6.2**中的密码算数问题

   ![image-20230411094655219](C:\Users\77089\AppData\Roaming\Typora\typora-user-images\image-20230411094655219.png)

   形式化定义：

   变量：$\{F,T,U,W,R,O,C1,C2,C3\}$

   值域：$\{0,1,2,3,4,5,6,7,8,9\}$

   约束：$O+O=R+10\times C1\\W+W + C1 = U+10\times C2\\T+T+C2=O+10\times C3\\F=C3,T\ne 0 ,F\ne 0\\0<=C1,C2,C3<2\\F\ne O\ne U\ne R\ne T\ne W$

   使用前向检验的回溯法：

   先对F赋值

   | F    | T     | U     | W     | R     | O     | C1    | C2    | C3   |
   | ---- | ----- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
   | 1    | (5-9) | (0-9) | (0-9) | (0-9) | (0-9) | (0,1) | (0,1) | 1    |

   再对T赋值

   | F    | T    | U     | W     | R     | O     | C1    | C2    | C3   |
   | ---- | ---- | ----- | ----- | ----- | ----- | ----- | ----- | ---- |
   | 1    | 7    | (0-9) | (0-9) | (8,0) | (4,5) | (0,1) | (0,1) | 1    |

   对W赋值

   | F    | T    | U    | W    | R     | O     | C1    | C2   | C3   |
   | ---- | ---- | ---- | ---- | ----- | ----- | ----- | ---- | ---- |
   | 1    | 7    | 6,7  | 8    | (8,0) | (4,5) | (0,1) | 1    | 1    |

   对O赋值

   | F    | T    | U         | W    | R        | O    | C1    | C2   | C3   |
   | ---- | ---- | --------- | ---- | -------- | ---- | ----- | ---- | ---- |
   | 1    | 7    | U无值可选 | 8    | 0        | 5    | 1     | 1    | 1    |
   | 1    | 7    | 6,7       | 8    | 无值可选 | 4    | (0,1) | 1    | 1    |

   此事回溯

   对W赋值

   | F    | T    | U    | W    | R     | O     | C1    | C2   | C3   |
   | ---- | ---- | ---- | ---- | ----- | ----- | ----- | ---- | ---- |
   | 1    | 7    | 2,3  | 6    | (8,0) | (4,5) | (0,1) | 1    | 1    |

   对O赋值

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    | 7    | 3    | 6    | 0    | 5    | 1    | 1    | 1    |

   求得结果

   使用带MRV的回溯

   考虑到不相等的约束没有值的约束强

   先对C3赋值(约束数为4)

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    |      |      |      |      |      |      |      | 1    |

   再对C2赋值(约束数为3)

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    |      |      |      |      |      |      | 1    | 1    |

   再对C1赋值(约束数为3)

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    |      |      |      |      |      | 1    | 1    | 1    |

   再对O赋值(约束数为3)

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    | 8    |      |      | 4    | 7    | 1    | 1    | 1    |

   再对U赋值(约束数为2)

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    | 8    | 3    | 6    | 4    | 7    | 1    | 1    | 1    |

   此时有解FOUR = 1734 TWO=867

   使用最少约束值启发式，启发式函数可以设为对某次赋值后剩下的未赋值变量之和

   先对C3赋值可以减少两个变量的赋值$h(C3) = 7$

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    |      |      |      |      |      |      |      | 1    |

   再对C2赋值,$h(C2) = 6$

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    |      |      |      |      |      |      | 1    | 1    |

   再对T赋值，$h(T) = 2$

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    | 7    |      |      | 0    | 5    | 1    | 1    | 1    |

   最后对U赋值，$h(U) = 0$

   | F    | T    | U    | W    | R    | O    | C1   | C2   | C3   |
   | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
   | 1    | 7    | 3    | 6    | 0    | 5    | 1    | 1    | 1    |

   即可求解

2. 用**AC-3**算法说明弧相容对**图6.1**中问题能够检测出部分赋值，WA=RED，V=BLUE的不相容

   ![image-20230411105256880](C:\Users\77089\AppData\Roaming\Typora\typora-user-images\image-20230411105256880.png)

   | WA   | NT   | Q    | NSW  | SA   | V    |
   | ---- | ---- | ---- | ---- | ---- | ---- |
   | RED  |      |      |      |      | BLUE |

   弧队列为：WA-SA，SA-V，WA-NT，NT-SA，NT-Q，SA-Q，Q-NSW，SA-NSW，NSW-V

   1. pop(WA-NT)，此时从SA值域删掉red
   2. pop(SA-V)，此时从SA删掉blue，因此SA只能是GREEN
   3. pop(WA-NT)，此时从NT删掉red
   4. pop(NT-SA)，此时从NT删掉GREEN，因此NT必为BLUE
   5. pop(NT-Q)，此时从Q删掉BLUE
   6. pop(SA-Q)，此时从Q删掉GREEN，Q必为RED
   7. pop(Q-NSW)，此时从NSW删掉RED
   8. pop(SA-NSW)，此时从NSW删掉GREEN
   9. pop(NSW-V)，此时从NSW删掉BLUE，NSW无值可选，因此赋值不满足约束

3. 用**AC-3**算法求解树结构**CSP**在最坏情况下的复杂度是多少?

   因为树状结构没有环，所以一条边只会被考虑一次，且最多只会移除d个值(d是值域最大的可取值数)

   因此最坏情况下，每条边都会被考虑一次。为$O(Ed)$，E是边数

​	